
<mat-spinner *ngIf="isLoading"></mat-spinner>

  <!-- List all auctions. -->
  <div class="search-bar" *ngIf="!isLoading && getMode()">
      <ng5-slider [(value)]="sliderMinValue" [(highValue)]="sliderMaxValue" [options]="sliderOptions"></ng5-slider>
      <input mat-input type="text" placeholder="Search auctions..." [(ngModel)]="searchValue">
      <button mat-button (click)="onSearchSubmit()">
        <i class="material-icons">
          search
        </i>
      </button>
  </div>
  <div *ngIf="getMode() && !isLoading">
    <mat-grid-list cols="4" rowHeight="2:1" >
      <mat-grid-tile *ngFor="let auction of auctions">
          <a
          mat-button color="primary"
          [routerLink]="['/auction/', auction.id]">
        <div class="grid">
            <div class="auction-image-all">
                <img [title]="auction.name"[src]="auction.image" [alt]="auction.name">
                <div class="auction-description">
                  <h4>{{auction.name}}</h4>
                  <p>{{auction.buyPrice}} $</p>
                </div>
            </div>
        </div>
      </a>
      </mat-grid-tile>
    </mat-grid-list>
    <mat-paginator [length]="totalAuctions"
                   [pageSize]="auctionsPerPage"
                   [pageSizeOptions]="pageSizeOptions"
                   (page)="onChangePage($event)">
    </mat-paginator>
  </div>


  <!-- If we need to show just one auction. -->
  <div class="single-auction" *ngIf="!getMode() && !isLoading">
      <h2>{{ auction.name }}</h2>
      <div class="auction-image-single">
          <img [src]="this.auction.image" [alt]="this.auction.name">
      </div>
      <div class="grid-info">
          <p *ngIf="checkBuyPrice(this.auction.buyPrice)">
            Instant buy price: {{ this.auction.buyPrice }}
          </p>
          <p>Auction deadline: {{this.auction.endDate }}</p>
          <p *ngIf="this.categoryNames">Item category: {{this.categoryNames}}</p>
          <p>Country: {{this.auction.country}}</p>
          <p>Address: {{this.auction.address}}</p>
          <p>Highest bid: {{this.auction.highestBid}}</p>
          <p>Description: {{this.auction.description}}</p>
          <button mat-button *ngIf="this.auction.bids" (click)="onBidList(this.auction)">Show bids...</button>
          <agm-map [latitude]="toNumber(this.auction.latitude)" [longitude]="toNumber(this.auction.longitude)">
              <agm-marker
                [latitude]="this.auction.latitude"
                [longitude]="this.auction.longitude">
              </agm-marker>
          </agm-map>
          <div class="bid" *ngIf="this.auction.startDate !== null && this.authenticationService.getLoggedUserId()">
              <input type="number" [(ngModel)]="bidValue" placeholder="Bid amount">
              <button
                mat-raised-button
                color="warn"
                (click)="onBidSubmit()">Submit Bid!
              </button>
              <mat-error *ngIf="bidErrorMessage">{{bidErrorMessage}}</mat-error>
          </div>

          <div class="seller" *ngIf="checkOwnership(this.auction.sellerId)">
            <div class="buttons">
              <button
                mat-button
                color="accent"
                (click)="onStart(this.auction.id)"
                *ngIf="this.auction.startDate === null">Start auction
              </button>
              <a
                mat-button color="primary"
                [routerLink]="['/auction/edit', this.auction.id]"
                *ngIf="this.auction.startDate === null">Edit auction</a>
              <button mat-button color="warn" (click)="onDelete(this.auction.id)">Delete auction</button>
            </div>
          </div>
          <button mat-button (click)="onExtract('XML', auction.id)">Extract as XML</button>
          <button mat-button (click)="onExtract('JSON', auction.id)">Extract as JSON</button>
      </div>
  </div>

<p class="info-text mat-body-1" *ngIf="getMode() && auctions.length <= 0 && !isLoading">No auctions added yet!</p>
